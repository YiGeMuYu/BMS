<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.muyu.bms.mapper.BookMapper">
    <!--boolean addBook(@Param("book") Book book);-->
    <insert id="addBook" parameterType="Book">
        insert into bms_book(bname,author,type,inventory,picture,bookstatus) VALUES(#{book.bname},#{book.author},#{book.type},#{book.inventory},#{book.picture},1)
    </insert>

    <!--List<Book> queryAllBook();-->
    <select id="queryAllBook" resultType="Book">
        select * from bms_book where bookstatus=1
    </select>
    <!--Book queryBookById(@Param("bid") int bid);-->
    <select id="queryBookById" resultType="Book">
        select * from bms_book where bid=#{bid}
    </select>
    <!--boolean updateBookById(@Param("book") Book book);-->
    <update id="updateBookById">
        update bms_book
       <set>
           bname=#{book.bname},
           type=#{book.type},
           author=#{book.author},
           inventory=#{book.inventory},
           <if test="book.picture != null and book.picture != ''">
               picture=#{book.picture},
           </if>

       </set>
        where bid=#{book.bid}
    </update>


    <!--boolean updateBookStatusById(@Param("bid")int bid);-->
    <update id="updateBookStatusById">
        update bms_book
        set bookstatus=0
        where bid=#{bid}
    </update>
</mapper>